<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"bryceustc.github.io","root":"/","scheme":"Pisces","version":"7.7.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="æ•…éšœè¯Šæ–­ç³»ç»Ÿæ¦‚è¿°ç ”ç©¶çš„åŸºäºè‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ çš„æ•…éšœè¯Šæ–­ç³»ç»Ÿæ—¢å…·æœ‰æ•…éšœè¯Šæ–­ç®—æ³•è®­ç»ƒåŠŸèƒ½ï¼Œä¹Ÿå…·æœ‰ç®—æ³•éƒ¨ç½²åŠŸèƒ½ã€‚å®ƒä¼šè¯»å–æ•…éšœæ•°æ®ï¼Œè¿›è¡Œç‰¹å¾æå–ï¼Œç„¶åä½¿ç”¨è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ æ–¹æ³•æ‰¾å‡ºæœ€ä¼˜æœºå™¨å­¦ä¹ æµç¨‹ï¼Œå¹¶å°†è¯¥æµç¨‹è®­ç»ƒå¥½ä¿å­˜ä¸‹æ¥ï¼Œæœ€åä½¿ç”¨WebæœåŠ¡å™¨å¯¹æ•…éšœè¯Šæ–­ç®—æ³•è¿›è¡Œéƒ¨ç½²ã€‚æ‰€ç ”ç©¶çš„æ•…éšœè¯Šæ–­ç³»ç»Ÿå…·æœ‰é«˜åº¦è‡ªåŠ¨åŒ–ã€åŠŸèƒ½æ‹“å±•æ–¹ä¾¿ã€æ¨¡å‹æ›´æ–°æ–¹ä¾¿çš„ç‰¹ç‚¹ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="æ³µç«™æœºç»„æ•…éšœè¯Šæ–­">
<meta property="og:url" content="https://bryceustc.github.io/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/index.html">
<meta property="og:site_name" content="Bryce&#39;s Blog">
<meta property="og:description" content="æ•…éšœè¯Šæ–­ç³»ç»Ÿæ¦‚è¿°ç ”ç©¶çš„åŸºäºè‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ çš„æ•…éšœè¯Šæ–­ç³»ç»Ÿæ—¢å…·æœ‰æ•…éšœè¯Šæ–­ç®—æ³•è®­ç»ƒåŠŸèƒ½ï¼Œä¹Ÿå…·æœ‰ç®—æ³•éƒ¨ç½²åŠŸèƒ½ã€‚å®ƒä¼šè¯»å–æ•…éšœæ•°æ®ï¼Œè¿›è¡Œç‰¹å¾æå–ï¼Œç„¶åä½¿ç”¨è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ æ–¹æ³•æ‰¾å‡ºæœ€ä¼˜æœºå™¨å­¦ä¹ æµç¨‹ï¼Œå¹¶å°†è¯¥æµç¨‹è®­ç»ƒå¥½ä¿å­˜ä¸‹æ¥ï¼Œæœ€åä½¿ç”¨WebæœåŠ¡å™¨å¯¹æ•…éšœè¯Šæ–­ç®—æ³•è¿›è¡Œéƒ¨ç½²ã€‚æ‰€ç ”ç©¶çš„æ•…éšœè¯Šæ–­ç³»ç»Ÿå…·æœ‰é«˜åº¦è‡ªåŠ¨åŒ–ã€åŠŸèƒ½æ‹“å±•æ–¹ä¾¿ã€æ¨¡å‹æ›´æ–°æ–¹ä¾¿çš„ç‰¹ç‚¹ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://bryceustc.github.io/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/liucheng1.png">
<meta property="og:image" content="https://bryceustc.github.io/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/shujuku1.png">
<meta property="og:image" content="https://bryceustc.github.io/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/ROC.jpg">
<meta property="og:image" content="https://bryceustc.github.io/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/tezheng.jpg">
<meta property="og:image" content="https://bryceustc.github.io/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/environment.png">
<meta property="og:image" content="https://bryceustc.github.io/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/ini.jpg">
<meta property="og:image" content="https://bryceustc.github.io/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/guifan2.png">
<meta property="og:image" content="https://bryceustc.github.io/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/guifan.png">
<meta property="og:image" content="https://bryceustc.github.io/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/guifan3.png">
<meta property="og:image" content="https://bryceustc.github.io/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/guifan4.png">
<meta property="og:image" content="https://bryceustc.github.io/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/res.jpg">
<meta property="article:published_time" content="2020-03-30T13:01:40.000Z">
<meta property="article:modified_time" content="2020-03-31T14:52:40.433Z">
<meta property="article:author" content="Bryce">
<meta property="article:tag" content="é¡¹ç›®">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://bryceustc.github.io/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/liucheng1.png">

<link rel="canonical" href="https://bryceustc.github.io/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>æ³µç«™æœºç»„æ•…éšœè¯Šæ–­ | Bryce's Blog</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?41fc030db57d5570dd22f78997dc4a7e";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Bryce's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Learn Everything.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://bryceustc.github.io/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/touxiang.jfif">
      <meta itemprop="name" content="Bryce">
      <meta itemprop="description" content="å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Bryce's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          æ³µç«™æœºç»„æ•…éšœè¯Šæ–­
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-03-30 21:01:40" itemprop="dateCreated datePublished" datetime="2020-03-30T21:01:40+08:00">2020-03-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-31 22:52:40" itemprop="dateModified" datetime="2020-03-31T22:52:40+08:00">2020-03-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A1%B9%E7%9B%AE/" itemprop="url" rel="index"><span itemprop="name">é¡¹ç›®</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>8.8k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>8 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h3 id="æ•…éšœè¯Šæ–­ç³»ç»Ÿæ¦‚è¿°"><a href="#æ•…éšœè¯Šæ–­ç³»ç»Ÿæ¦‚è¿°" class="headerlink" title="æ•…éšœè¯Šæ–­ç³»ç»Ÿæ¦‚è¿°"></a>æ•…éšœè¯Šæ–­ç³»ç»Ÿæ¦‚è¿°</h3><p>ç ”ç©¶çš„åŸºäºè‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ çš„æ•…éšœè¯Šæ–­ç³»ç»Ÿæ—¢å…·æœ‰æ•…éšœè¯Šæ–­ç®—æ³•è®­ç»ƒåŠŸèƒ½ï¼Œä¹Ÿå…·æœ‰ç®—æ³•éƒ¨ç½²åŠŸèƒ½ã€‚å®ƒä¼šè¯»å–æ•…éšœæ•°æ®ï¼Œè¿›è¡Œç‰¹å¾æå–ï¼Œç„¶åä½¿ç”¨è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ æ–¹æ³•æ‰¾å‡ºæœ€ä¼˜æœºå™¨å­¦ä¹ æµç¨‹ï¼Œå¹¶å°†è¯¥æµç¨‹è®­ç»ƒå¥½ä¿å­˜ä¸‹æ¥ï¼Œæœ€åä½¿ç”¨WebæœåŠ¡å™¨å¯¹æ•…éšœè¯Šæ–­ç®—æ³•è¿›è¡Œéƒ¨ç½²ã€‚æ‰€ç ”ç©¶çš„æ•…éšœè¯Šæ–­ç³»ç»Ÿå…·æœ‰é«˜åº¦è‡ªåŠ¨åŒ–ã€åŠŸèƒ½æ‹“å±•æ–¹ä¾¿ã€æ¨¡å‹æ›´æ–°æ–¹ä¾¿çš„ç‰¹ç‚¹ã€‚</p>
<a id="more"></a>
<p>æœ¬ç³»ç»Ÿç”±ä»¥ä¸‹å‡ ä¸ªå­éƒ¨åˆ†æ„æˆï¼š</p>
<p>ï¼ˆ1ï¼‰ç³»ç»Ÿè¿è¡Œæ—¥å¿—ã€‚æ—¥å¿—æ˜¯å¯¹ç³»ç»Ÿè¿è¡ŒçŠ¶æ€çš„è®°å½•ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ£€éªŒç³»ç»Ÿè¿è¡Œæ˜¯å¦æ­£å¸¸ï¼Œåœ¨å‡ºç°å¼‚å¸¸æƒ…å†µæ—¶å¯ä»¥å¸®åŠ©ä½¿ç”¨è€…å¿«é€ŸæŸ¥æ‰¾é”™è¯¯ã€‚æ—¥å¿—çš„è®°å½•æ˜¯åˆ†çº§åˆ«çš„ï¼Œä¸€èˆ¬åˆ†ä¸ºDEBUGã€INFOã€WARNINGã€ERRORã€CRITICAL äº”ä¸ªçº§åˆ«ï¼Œè¿™äº”ä¸ªçº§åˆ«çš„ä¸¥é‡ç¨‹åº¦è¶Šæ¥è¶Šé«˜ã€‚</p>
<p>ï¼ˆ2ï¼‰ç³»ç»Ÿé…ç½®æ–‡ä»¶ã€‚ç³»ç»Ÿé…ç½®æ–‡ä»¶æœ¬è´¨ä¸Šæ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œé€šè¿‡é…å¥—çš„æ–‡æœ¬è§£ææ–¹æ³•å¯ä»¥æå–å‡ºå˜é‡ååŠå…¶å¯¹åº”çš„è®¾å®šå€¼ã€‚ç³»ç»Ÿåœ¨ä¸»åŠŸèƒ½è¿è¡Œå‰è¯»å–é…ç½®æ–‡ä»¶ï¼Œä»è€Œè®¾å®šç¨‹åºçš„è¿è¡Œæ¨¡å¼æˆ–è®­ç»ƒä»»åŠ¡ï¼Œè¾¾åˆ°ä¸æ”¹å˜ä»£ç å°±å¯ä»¥æ”¹å˜ç¨‹åºè¿è¡Œçš„æ•ˆæœã€‚</p>
<p>ï¼ˆ3ï¼‰æ•…éšœæ ·æœ¬æ•°æ®åº“ã€‚æ‰€ç ”ç©¶çš„æ•…éšœè¯Šæ–­ç®—æ³•æ˜¯åŸºäºæœºå™¨å­¦ä¹ çš„ï¼Œè€Œæœºå™¨å­¦ä¹ æ–¹æ³•æ˜¯ç”±æ•°æ®é©±åŠ¨çš„ï¼Œå› æ­¤ä¸€ä¸ªæ•…éšœæ ·æœ¬æ•°æ®åº“æ˜¯å¿…è¦çš„ã€‚ç”±äºæœ¬æ–‡ç ”ç©¶å¯¹è±¡æ³µç«™æœºç»„å…·æœ‰å‹å·å¤šã€è¿è¡Œå·¥å†µå¤æ‚çš„ç‰¹ç‚¹ï¼Œæ•…éšœæ ·æœ¬æ•°æ®åº“åœ¨è®¾è®¡çš„æ—¶å€™å……åˆ†è€ƒè™‘äº†è¿™äº›ç‰¹ç‚¹ã€‚</p>
<p>ï¼ˆ4ï¼‰æ ·æœ¬å¹³è¡¡æ€§æ£€éªŒã€‚åœ¨ç”¨æ•°æ®è¿›è¡Œè®­ç»ƒä¹‹å‰ï¼Œåº”è¯¥å¯¹æ ·æœ¬å¹³è¡¡æ€§è¿›è¡Œæ£€éªŒï¼Œæ ·æœ¬æ•°é‡æ¯”è¾ƒå°‘çš„åšä¸€äº›ç‰¹æ®Šå¤„ç†ï¼Œæ ·æœ¬æ•°é‡å¤ªå°‘çš„åº”ä»è®­ç»ƒé›†é‡Œäºˆä»¥å‰”é™¤ï¼Œæ›´å¤±è¡¡ä¸¥é‡çš„å°±ç»ˆæ­¢æœ¬æ¬¡è®­ç»ƒï¼Œç­‰å¾…æ•°æ®æ”¶é›†å®Œæ¯•åå†å¼€å§‹ã€‚</p>
<p>ï¼ˆ5ï¼‰æ•…éšœç‰¹å¾æå–ã€‚ä»æ•…éšœæ•°æ®åº“è·å¾—çš„æ•°æ®æ˜¯ä¼ æ„Ÿå™¨æ•°æ®ï¼Œè€Œä¼ æ„Ÿå™¨æ•°æ®æ˜¯æ— æ³•ç›´æ¥ä½œä¸ºæœºå™¨å­¦ä¹ ç®—æ³•è¾“å…¥çš„ã€‚ä¸ºäº†æé«˜æ•…éšœè¯Šæ–­ç®—æ³•çš„æ•ˆæœï¼Œåº”è¯¥å…ˆå¯¹æ•°æ®åº“ä¸­ä¼ æ„Ÿå™¨æ•°æ®ä½¿ç”¨å¿«é€Ÿå‚…é‡Œå¶å˜æ¢è¿›è¡Œé¢„å¤„ç†ã€‚</p>
<p>ï¼ˆ6ï¼‰ä½¿ç”¨TPOTè¿›è¡Œæ¨¡å‹è®­ç»ƒã€‚é‡‡ç”¨åŸºäºé—ä¼ ç®—æ³•çš„è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ æ–¹æ³•TPOTæ˜¯ä½¿ç”¨é—ä¼ ç®—æ³•å¯¹ç‰¹å¾å½’ä¸€åŒ–ã€ç‰¹å¾é€‰æ‹©ã€æ¨¡å‹å’Œå‚æ•°é€‰æ‹©ç­‰ç¯èŠ‚ç»„æˆçš„æœºå™¨å­¦ä¹ æµç¨‹è¿›è¡Œè‡ªåŠ¨æ„å»ºå¹¶å¯»ä¼˜çš„æ–¹æ³•ã€‚</p>
<p>ï¼ˆ7ï¼‰æ•…éšœè¯Šæ–­æ¨¡å‹å·¥ç¨‹éƒ¨ç½²ã€‚æ‰€ç ”ç©¶çš„æ•…éšœè¯Šæ–­æ¨¡å‹å·¥ç¨‹éƒ¨ç½²æ–¹æ³•æ˜¯åŸºäºPythonè½»å‹WebæœåŠ¡å™¨æ¡†æ¶Flaské€šè¿‡HTTPåè®®å®ç°Pythonç¯å¢ƒä¸Javaç¯å¢ƒçš„äº¤äº’ã€‚</p>
<p>æ•…éšœè¯Šæ–­ç³»ç»Ÿå·¥ä½œæµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/liucheng1.png" alt></p>
<h3 id="æ•…éšœè¯Šæ–­ç³»ç»Ÿç ”ç©¶"><a href="#æ•…éšœè¯Šæ–­ç³»ç»Ÿç ”ç©¶" class="headerlink" title="æ•…éšœè¯Šæ–­ç³»ç»Ÿç ”ç©¶"></a>æ•…éšœè¯Šæ–­ç³»ç»Ÿç ”ç©¶</h3><h4 id="æ•…éšœæ•°æ®åº“è®¾è®¡è§„èŒƒ"><a href="#æ•…éšœæ•°æ®åº“è®¾è®¡è§„èŒƒ" class="headerlink" title="æ•…éšœæ•°æ®åº“è®¾è®¡è§„èŒƒ"></a>æ•…éšœæ•°æ®åº“è®¾è®¡è§„èŒƒ</h4><p>åœ¨æ³µç«™æœºç»„å‹å·æˆ–è¿è¡Œå·¥å†µä¸ä¸€æ ·çš„æƒ…å†µä¸‹ï¼Œè™½ç„¶æœºç»„å‘ç”Ÿäº†åŒä¸€ç§æ•…éšœç±»å‹ï¼Œä½†åŒæ ·ä½ç½®çš„ä¼ æ„Ÿå™¨æ•°æ®ä¼šæœ‰æ‰€ä¸åŒï¼Œè¿™å°±å¯¼è‡´æå–çš„ç‰¹å¾ä¹Ÿæœ‰ç‚¹ä¸åŒã€‚å› æ­¤ï¼Œåœ¨æ•…éšœæ•°æ®å­˜å‚¨æ—¶å¿…é¡»è¦ä½“ç°å‡ºæ•…éšœæ ·æœ¬çš„æ¥æºèƒŒæ™¯ï¼Œè¿™é‡Œç”¨æœºç»„å‹å·å’Œè¿è¡Œå·¥å†µæ¥è¡¨ç¤ºã€‚</p>
<p>ä»¥æœºç»„æŸä¸ªéƒ¨ä»¶æœ‰ä¸¤ä¸ªä¼ æ„Ÿå™¨ä¸ºä¾‹è®¾è®¡çš„æ•…éšœæ•°æ®åº“è§„èŒƒå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>
<p><img src="/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/shujuku1.png" alt></p>
<h4 id="æ•…éšœæ ·æœ¬ä¸å¹³è¡¡å¤„ç†"><a href="#æ•…éšœæ ·æœ¬ä¸å¹³è¡¡å¤„ç†" class="headerlink" title="æ•…éšœæ ·æœ¬ä¸å¹³è¡¡å¤„ç†"></a>æ•…éšœæ ·æœ¬ä¸å¹³è¡¡å¤„ç†</h4><h5 id="æ ·æœ¬ä¸å¹³è¡¡ä¸‹çš„è®­ç»ƒæ–¹æ³•"><a href="#æ ·æœ¬ä¸å¹³è¡¡ä¸‹çš„è®­ç»ƒæ–¹æ³•" class="headerlink" title="æ ·æœ¬ä¸å¹³è¡¡ä¸‹çš„è®­ç»ƒæ–¹æ³•"></a>æ ·æœ¬ä¸å¹³è¡¡ä¸‹çš„è®­ç»ƒæ–¹æ³•</h5><p>é’ˆå¯¹æ ·æœ¬ä¸å¹³è¡¡ä¸‹çš„è®­ç»ƒæ•°æ®é›†é‡‡ç”¨ç®€å•æ˜“è¡Œçš„è°ƒæ•´ç±»çš„æƒé‡æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ˜¯åœ¨è¯¯å·®å‡½æ•°é‡Œæ·»åŠ ç±»åˆ«æƒé‡ï¼Œä»¥è¾¾åˆ°è¯¯å·®å¹³è¡¡ï¼Œå¸¦æƒé‡çš„è¯¯å·®å‡½æ•°ä¸ºï¼š</p>
<p>$$<br>\text { error }=\frac{\sum_{i=1}^{n} w_{i}\left(y_{i}^{\prime}-y_{i}\right)^{2}}{n}<br>$$</p>
<p>å…¶ä¸­ï¼š</p>
<p>$ğ‘›$ ä»£è¡¨æ ·æœ¬æ€»æ•°ï¼›</p>
<p>$ğ‘¤_ğ‘–$ ä»£è¡¨ç¬¬$i$ä¸ªæ ·æœ¬æ‰€åœ¨ç±»åˆ«çš„æƒé‡ï¼›</p>
<p>$y_{i}^{\prime}$ä»£è¡¨ç¬¬$i$ä¸ªæ ·æœ¬çš„é¢„æµ‹ç»“æœï¼›</p>
<p>$ğ‘¦_ğ‘–$ä»£è¡¨ç¬¬$i$ä¸ªæ ·æœ¬çš„å®é™…ç»“æœã€‚</p>
<h5 id="æ ·æœ¬ä¸å¹³è¡¡ä¸‹çš„è¯„ä¼°æ–¹æ³•"><a href="#æ ·æœ¬ä¸å¹³è¡¡ä¸‹çš„è¯„ä¼°æ–¹æ³•" class="headerlink" title="æ ·æœ¬ä¸å¹³è¡¡ä¸‹çš„è¯„ä¼°æ–¹æ³•"></a>æ ·æœ¬ä¸å¹³è¡¡ä¸‹çš„è¯„ä¼°æ–¹æ³•</h5><p>åœ¨ç»Ÿè®¡å’Œæœºå™¨å­¦ä¹ ä¸­ï¼Œå¸¸å¸¸ç”¨AUC æ¥è¯„ä¼°äºŒåˆ†ç±»æ¨¡å‹çš„æ€§èƒ½ï¼ˆå¤šåˆ†ç±»ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œä½œä¸ºäºŒåˆ†ç±»çš„æ‹“å±•ï¼‰ã€‚AUC çš„å…¨ç§°æ˜¯Area under the curveï¼Œå³æ›²çº¿ä¸‹çš„é¢ç§¯ã€‚é€šå¸¸è¿™é‡Œçš„æ›²çº¿æŒ‡çš„æ˜¯å—è¯•è€…æ“ä½œæ›²çº¿(Receiver Operating Characteristic,ROC)ã€‚ç›¸æ¯”äºå‡†ç¡®ç‡ã€å¬å›ç‡ã€F1 å€¼ç­‰ä¾èµ–äºåˆ¤å†³é˜ˆå€¼çš„è¯„ä¼°æŒ‡æ ‡ï¼ŒAUCåˆ™æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ROC æ›²çº¿ï¼š</p>
<p><img src="/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/ROC.jpg" alt></p>
<p>AUCå€¼ä¸ºROC æ›²çº¿ä¸‹æ–¹æ‰€è¦†ç›–çš„åŒºåŸŸé¢ç§¯ï¼ŒAUCè¶Šå¤§, è¯´æ˜æ›²çº¿è¶Šé è¿‘(0,1) è¿™ä¸ªç‚¹ï¼Œè¶Šæ¥è¿‘ç†æƒ³æ›²çº¿ï¼Œåˆ†ç±»æ•ˆæœè‡ªç„¶æ›´å¥½ã€‚</p>
<p>AUCæŒ‡æ ‡ä¸ºä»€ä¹ˆå¯ä»¥ä½œä¸ºæ ·æœ¬ä¸å¹³è¡¡æƒ…å†µä¸‹çš„æ¨¡å‹è¯„ä»·æŒ‡æ ‡ï¼Ÿå› ä¸ºå½“ç”¨æ¥éªŒè¯ç®—æ³•æ•ˆæœçš„æ•°æ®é›†ä¸­çš„æ ·æœ¬æ¯”ä¾‹å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒROCæ›²çº¿çš„å½¢çŠ¶èƒ½å¤Ÿä¿æŒä¸å˜ï¼Œè€ŒAUCæ˜¯ROCæ›²çº¿çš„ä¸‹æ–¹é¢ç§¯ï¼Œæ‰€ä»¥å½“æ¨¡å‹ä¸€å®šæ—¶ï¼ŒAUCçš„å€¼ä¹Ÿä¸éšæ­£è´Ÿæ ·æœ¬åˆ†å¸ƒçš„å˜åŒ–è€Œå˜åŒ–ï¼Œæ‰€ä»¥èƒ½å¤Ÿä½œä¸ºä¸å¹³è¡¡æ•°æ®é›†çš„æ¨¡å‹è¯„ä»·æŒ‡æ ‡ã€‚</p>
<h4 id="æ•…éšœç‰¹å¾æå–"><a href="#æ•…éšœç‰¹å¾æå–" class="headerlink" title="æ•…éšœç‰¹å¾æå–"></a>æ•…éšœç‰¹å¾æå–</h4><p>æ³µè½´çš„å¸¸è§æ•…éšœæœ‰æ²¹è†œæ¶¡åŠ¨ã€æ¥è§¦æ‘©æ“¦ã€æ²¹è†œæŒ¯è¡ã€è½¬å­ä¸å¹³è¡¡å’Œè½¬å­ä¸å¯¹ä¸­ï¼Œè¿™äº›æ•…éšœéƒ½å¯ä»¥ä½“ç°åœ¨æ³µè½´çš„æŒ¯åŠ¨ä¿¡å·é‡Œï¼Œé€šå¸¸é‡‡ç”¨æ³µè½´çš„æ‘†åº¦æ•°å€¼ä½œä¸ºå®ƒçš„æŒ¯åŠ¨ä¿¡å·ã€‚é€šè¿‡åˆ©ç”¨FFTå¿«é€Ÿå‚…é‡Œå¶å˜æ¢å°†æ—¶åŸŸçš„æŒ¯åŠ¨ä¿¡å·è½¬æ¢ä¸ºé¢‘åŸŸçš„èƒ½é‡åˆ†å¸ƒã€‚</p>
<p>ä¸‹é¢å¯¹æ³µè½´çš„è½¬å­ä¸å¹³è¡¡æ•…éšœæ•°æ®è¿›è¡Œç‰¹å¾æå–å®éªŒï¼Œä»‹ç»å¦‚ä¸‹ï¼š</p>
<p>ï¼ˆ1ï¼‰æ•°æ®æ¥æºä¼ æ„Ÿå™¨ï¼šæ³µè½´$Y$æ–¹å‘æ‘†åº¦ä¿¡å·</p>
<p>ï¼ˆ2ï¼‰æ•°æ®æ»¤æ³¢æ–¹æ³•ä¸çª—å‡½æ•°ï¼šå°æ³¢é˜ˆå€¼å»å™ªã€æ±‰å®çª—</p>
<p>ï¼ˆ3ï¼‰åŸºé¢‘$ğ¹_0$ã€é‡‡æ ·é¢‘ç‡$ğ¹_ğ‘ $å’Œé‡‡æ ·ç‚¹æ•°$ğ‘$ï¼š$20Hz$ã€$2048Hz$ã€$2048$ç”±ä¸Šé¢å‡ ä¸ªæ•°æ®ï¼Œå¯å¾—åˆ°ä¸‹é¢å‡ ä¸ªé¢‘è°±åˆ†æéœ€è¦çš„å‚æ•°ï¼š</p>
<p>ï¼ˆaï¼‰æœ€é«˜æœ‰æ•ˆé¢‘ç‡ğ¹ğ‘šï¼šğ¹ğ‘š = ğ¹ğ‘ /2.56=800Hz</p>
<p>ï¼ˆbï¼‰é¢‘ç‡åˆ†è¾¨ç‡ğ›¥ğ¹ ï¼šğ›¥ğ¹ = ğ¹ğ‘ /ğ‘=2048/2048=1Hz</p>
<p>ï¼ˆcï¼‰è°±çº¿æ•°ğ‘€ï¼šğ‘€ = ğ‘/2.56=2048/2.56=800</p>
<p>ä¸‹å›¾ä¸ºè½¬å­ä¸å¹³è¡¡æ•…éšœç‰¹å¾æå–è¿‡ç¨‹ã€‚</p>
<p><img src="/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/tezheng.jpg" alt></p>
<p>å›¾ä¸­å…±æœ‰ä¸‰ä¸ªå­å›¾ï¼Œå…¶ä¸­æœ€ä¸Šé¢çš„å›¾æ˜¯æ³µè½´æ‘†åº¦ä¿¡å·çš„æ—¶åŸŸå›¾ï¼Œè¡¨ç°å‡º<br>äº†å‘¨æœŸæ€§ï¼Œä¸­é—´å›¾æ˜¯å¯¹æ‘†åº¦ä¿¡å·çš„æ—¶åŸŸæ•°æ®ä½œå¿«é€Ÿå‚…ç«‹å¶å˜æ¢å¾—åˆ°çš„é¢‘è°±ï¼Œæœ€ä¸‹é¢å›¾æ˜¯ä»é¢‘è°±æå–çš„ç‰¹å¾å‘é‡ã€‚</p>
<h4 id="è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ å·¥å…·TPOT"><a href="#è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ å·¥å…·TPOT" class="headerlink" title="è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ å·¥å…·TPOT"></a>è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ å·¥å…·TPOT</h4><p><a href="/TPOTâ€”â€”ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„Pythonæœºå™¨å­¦ä¹ å·¥å…·.md">æ­¤èŠ‚å…·ä½“å‚è€ƒè¿™é‡Œ</a></p>
<h4 id="è¯Šæ–­ç®—æ³•çš„éƒ¨ç½²"><a href="#è¯Šæ–­ç®—æ³•çš„éƒ¨ç½²" class="headerlink" title="è¯Šæ–­ç®—æ³•çš„éƒ¨ç½²"></a>è¯Šæ–­ç®—æ³•çš„éƒ¨ç½²</h4><p>è®¾ç½®WebæœåŠ¡å™¨ï¼Œé€šè¿‡HTTPåè®®è¿›è¡Œè°ƒç”¨ã€‚ç”Ÿäº§ç¯å¢ƒè½¯ä»¶é€šè¿‡ç½‘ç»œIPã€ç«¯å£å°†éœ€è¦è¯Šæ–­çš„æ•°æ®ä¼ é€’ç»™WebæœåŠ¡å™¨ã€‚WebæœåŠ¡å™¨æ¥å—åˆ°æ•°æ®åä¼šè¿›è¡Œè¯Šæ–­æœåŠ¡ï¼Œåœ¨è¯Šæ–­ç»“æŸåï¼Œè¯Šæ–­ç»“æœä¼šåŸè·¯è¿”å›ç»™æœåŠ¡è°ƒç”¨è€…ã€‚<br>è¯Šæ–­æ•°æ®ä¸Web æœåŠ¡å™¨ä¹‹é—´ä½¿ç”¨HTTPåè®®è¿›è¡Œé€šä¿¡ï¼ŒHTTPåè®®ä¸‹æœ‰GETã€POSTã€PUT å’ŒDELETE ç­‰æ–¹æ³•ï¼Œå› ä¸ºé€šä¿¡è¿‡ç¨‹ä¸­éœ€è¦ä¼ è¾“ä¼ æ„Ÿå™¨æ•°æ®ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨å¯æºå¸¦æ•°æ®ä½“çš„POSTæ–¹æ³•ã€‚</p>
<p>åœ¨æ•…éšœè¯Šæ–­çš„å„ä¸ªç¯èŠ‚ä¸­ï¼Œè¯Šæ–­ç®—æ³•å…·æœ‰â€œä¸€æ¬¡åŠ è½½ã€å¤šæ¬¡ä½¿ç”¨â€çš„ç‰¹ç‚¹ï¼Œè€Œç‰¹å¾æå–ã€ç®—æ³•è°ƒç”¨ç­‰æ­¥éª¤éšç€ä¼ è¾“æ•°æ®çš„ä¸åŒè€Œé‡‡ç”¨ä¸åŒçš„æ–¹æ³•ï¼Œæ‰€ä»¥æ•…éšœè¯Šæ–­WebæœåŠ¡å™¨åœ¨å®ç°æ—¶åº”è¯¥æŒ‰ç…§è¿™æ ·çš„æ–¹å¼ï¼šåŠ è½½è¯Šæ–­ç®—æ³•åœ¨åˆ›å»ºæ•…éšœè¯Šæ–­WebæœåŠ¡å™¨æ—¶è¿›è¡Œï¼Œæ•°æ®è·å–ã€ç‰¹å¾æå–ã€è°ƒç”¨è¯Šæ–­ç®—æ³•å’Œè¯Šæ–­ç»“æœè¿”å›è¿™äº›æ­¥éª¤åœ¨POSTæ–¹æ³•ä¸­å®ç°ã€‚</p>
<h3 id="æ•…éšœè¯Šæ–­ç³»ç»Ÿå…·ä½“å®ç°"><a href="#æ•…éšœè¯Šæ–­ç³»ç»Ÿå…·ä½“å®ç°" class="headerlink" title="æ•…éšœè¯Šæ–­ç³»ç»Ÿå…·ä½“å®ç°"></a>æ•…éšœè¯Šæ–­ç³»ç»Ÿå…·ä½“å®ç°</h3><h4 id="ç³»ç»Ÿå¼€å‘ç¯å¢ƒ"><a href="#ç³»ç»Ÿå¼€å‘ç¯å¢ƒ" class="headerlink" title="ç³»ç»Ÿå¼€å‘ç¯å¢ƒ"></a>ç³»ç»Ÿå¼€å‘ç¯å¢ƒ</h4><p>æ•…éšœè¯Šæ–­ç³»ç»Ÿæ˜¯åœ¨Windows 10ä¸Šä½¿ç”¨Pythonç¼–ç¨‹è¯­è¨€å¼€å‘çš„ï¼Œ<br>å…¶ä¸­æ•°æ®åº“ä½¿ç”¨SQL Serverï¼Œæ—¥å¿—ç®¡ç†ä½¿ç”¨Loggingï¼Œé…ç½®æ–‡ä»¶è§£æåŠ è½½ä½¿ç”¨Configparserï¼Œé¢‘åŸŸåˆ†æå·¥å…·åŒ…ä½¿ç”¨Scipyï¼ŒçŸ©é˜µæ•°æ®å¤„ç†ä½¿ç”¨Pandas å’ŒNumpyï¼Œè‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ å·¥å…·ä½¿ç”¨TPOTï¼Œæ¨¡å‹åºåˆ—åŒ–ä¿å­˜å·¥å…·ä½¿ç”¨Pickleï¼ŒWeb åº”ç”¨æ¡†æ¶ä½¿ç”¨Flaskã€‚</p>
<p>ä¸‹è¡¨æ˜¯è¯¦ç»†çš„æ•…éšœè¯Šæ–­ç³»ç»Ÿå¼€å‘ç¯å¢ƒã€‚</p>
<p><img src="/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/environment.png" alt></p>
<h4 id="ç³»ç»ŸåŠŸèƒ½æ¨¡å—çš„å®ç°"><a href="#ç³»ç»ŸåŠŸèƒ½æ¨¡å—çš„å®ç°" class="headerlink" title="ç³»ç»ŸåŠŸèƒ½æ¨¡å—çš„å®ç°"></a>ç³»ç»ŸåŠŸèƒ½æ¨¡å—çš„å®ç°</h4><h5 id="æ—¥å¿—ç®¡ç†"><a href="#æ—¥å¿—ç®¡ç†" class="headerlink" title="æ—¥å¿—ç®¡ç†"></a>æ—¥å¿—ç®¡ç†</h5><p>ç³»ç»Ÿæ—¥å¿—ç®¡ç†å·¥å…·ä½¿ç”¨Logging æ¨¡å—å®ç°ï¼Œå…·ä½“çš„æ˜¯ä½¿ç”¨äº†Logging ä¸‹çš„logger å¯¹è±¡ï¼Œä½¿ç”¨logger å¯¹è±¡å¯ä»¥é¿å…å¤šä¸ªç¨‹åºä½¿ç”¨åŒä¸€ä¸ªæ—¥å¿—æ–‡ä»¶æ—¶äº§ç”Ÿé‡å¤è®°å½•çš„é—®é¢˜ã€‚ç³»ç»Ÿæ—¥å¿—ç®¡ç†å·¥å…·è¢«æ‰“åŒ…æˆä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ï¼Œæ–¹ä¾¿ä¸åŒä»»åŠ¡çš„å¤ç”¨ã€‚<a href="https://cuiqingcai.com/6080.html" target="_blank" rel="noopener external nofollow noreferrer">loggingæ¨¡å—çš„åŸºæœ¬ç”¨æ³•</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_logger</span><span class="params">()</span>:</span></span><br><span class="line">    logger = logging.getLogger(__name__)</span><br><span class="line">    logger.setLevel(logging.DEBUG)</span><br><span class="line"></span><br><span class="line">    stream_handler = logging.StreamHandler()</span><br><span class="line">    stream_handler.setLevel(logging.DEBUG)</span><br><span class="line"></span><br><span class="line">    file_handler = logging.FileHandler(filename=<span class="string">'æ—¥å¿—.log'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">    file_handler.setLevel(logging.INFO)</span><br><span class="line"></span><br><span class="line">    formatter = logging.Formatter(fmt=<span class="string">'%(asctime)s - %(filename)s[line:%(lineno)d] - %(levelname)s: %(message)s'</span>)</span><br><span class="line"></span><br><span class="line">    stream_handler.setFormatter(formatter)</span><br><span class="line">    file_handler.setFormatter(formatter)</span><br><span class="line"></span><br><span class="line">    logger.addHandler(stream_handler)</span><br><span class="line">    logger.addHandler(file_handler)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> logger</span><br></pre></td></tr></table></figure>

<h5 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h5><p>é…ç½®æ–‡ä»¶çš„æ ¼å¼æœ‰iniã€tomlã€yamlã€json å’Œxml ç­‰ï¼Œå…¶ä¸­iniæ ¼å¼çš„æœ€ä¸ºç®€å•ç›´è§‚ï¼Œè¿™é‡Œä½¿ç”¨çš„é…ç½®æ–‡ä»¶å°±æ˜¯iniæ ¼å¼.éƒ¨åˆ†é…ç½®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/ini.jpg" alt></p>
<h4 id="å»ºç«‹æœºç»„æ•…éšœæ•°æ®åº“"><a href="#å»ºç«‹æœºç»„æ•…éšœæ•°æ®åº“" class="headerlink" title="å»ºç«‹æœºç»„æ•…éšœæ•°æ®åº“"></a>å»ºç«‹æœºç»„æ•…éšœæ•°æ®åº“</h4><p>åˆ©ç”¨æ•°æ®åº“SQL Server 2017 ä¸æ•°æ®åº“å¯è§†åŒ–ç®¡ç†å·¥å…·Navicat Premiumè¿›è¡Œæ­å»ºï¼Œé¦–å…ˆå‚è€ƒ<a href="https://www.cnblogs.com/ios9/p/9527939.html" target="_blank" rel="noopener external nofollow noreferrer">Win10 SQL Server 2017å®‰è£…</a>ï¼Œåˆ©ç”¨Navicatè¿›è¡Œåˆ›å»ºä¸€ä¸ªFaultsæ•°æ®åº“ï¼Œå¹¶åœ¨Faultsæ•°æ®åº“ä¸­åˆ›å»ºRotorè¡¨å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/guifan2.png" alt></p>
<p>ç„¶åæ ¹æ®æ•°æ®åº“è®¾è®¡è§„èŒƒï¼Œåœ¨è¡¨ä¸­åˆ›å»ºç›¸å¯¹åº”çš„å­—æ®µã€‚å¦‚å›¾æ‰€ç¤º:</p>
<p><img src="/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/guifan.png" alt></p>
<p><strong>æ³¨æ„ï¼š</strong> SQL Server 2017ä¸æ”¯æŒæ•°ç»„å½¢å¼ï¼Œè¿™é‡Œé‡‡ç”¨å°†æ•°ç»„è½¬åŒ–ä¸ºå­—ç¬¦ä¸²,å°†ä»–ä»¬æ‹¼æ¥èµ·æ¥å½“åšæ–‡æœ¬å†™å…¥ã€‚</p>
<p>å­—æ®µç±»å‹åœ¨è®¾ç½®çš„æ—¶å€™æ³¨æ„é‡‡ç”¨nvarchar(max)çš„ç±»å‹ï¼Œå…·ä½“å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/guifan3.png" alt></p>
<p><a href="https://data.mendeley.com/datasets/p9bsmj4xwg/1/files/9ecd3bf8-6ed0-452b-8c84-05a4833ac803" target="_blank" rel="noopener external nofollow noreferrer">Rotoræ•°æ®</a>, æ•°æ®æ˜¯.matæ–‡ä»¶ï¼Œåˆ©ç”¨Pythonå¤„ç†æ•°æ®åï¼Œå†™å…¥æ•°æ®åº“CGQ1è¿™ä¸€åˆ—ä¸­ï¼Œæœ€ç»ˆå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/guifan4.png" alt></p>
<h5 id="å¹³è¡¡æ€§æ£€éªŒ"><a href="#å¹³è¡¡æ€§æ£€éªŒ" class="headerlink" title="å¹³è¡¡æ€§æ£€éªŒ"></a>å¹³è¡¡æ€§æ£€éªŒ</h5><p>å¹³è¡¡æ€§æ£€éªŒå·¥å…·çš„å®ç°æ˜¯å…ˆä½¿ç”¨Pandas ç­›é€‰æ•°æ®ï¼Œç„¶åä½¿ç”¨Collectionsæ¨¡å—çš„Counter å·¥å…·è¿›è¡Œç»Ÿè®¡ã€‚</p>
<h5 id="æ•…éšœç‰¹å¾æå–-1"><a href="#æ•…éšœç‰¹å¾æå–-1" class="headerlink" title="æ•…éšœç‰¹å¾æå–"></a>æ•…éšœç‰¹å¾æå–</h5><p>æ•…éšœç‰¹å¾æå–å·¥å…·ä»¥ç‹¬ç«‹çš„ä»£ç æ–‡ä»¶å½¢å¼è¿›è¡Œå­˜æ”¾ï¼Œè¯¥å·¥å…·æ˜¯å¤šä¸ªç‰¹å¾æå–å‡½æ•°çš„é›†åˆï¼Œå¦‚æœæƒ³ä½¿ç”¨å“ªä¸ªç‰¹å¾æå–å‡½æ•°ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶é‡ŒæŒ‡å®šå‡½æ•°åï¼Œå¦‚æœæƒ³ä½¿ç”¨çš„å‡½æ•°ä¸å­˜åœ¨ï¼Œæ¨¡ä»¿å·²æœ‰çš„å‡½æ•°ç¼–è¾‘æ·»åŠ å³å¯ã€‚é€šè¿‡è¿™æ ·çš„è®¾è®¡ï¼Œæ— éœ€æ›´æ”¹ä¸»å‡½æ•°å°±å¯æ”¹å˜ç³»ç»ŸåŠŸèƒ½ã€‚ç‰¹å¾æå–å‡½æ•°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> scipy.fftpack <span class="keyword">import</span> fft</span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> MinMaxScaler</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">transfer</span><span class="params">(string)</span>:</span></span><br><span class="line">    string_arr = string.split(<span class="string">','</span>)</span><br><span class="line">    <span class="comment">#print(string_arr)</span></span><br><span class="line">    float_arr = list(map(float, string_arr))</span><br><span class="line">    <span class="keyword">return</span> float_arr</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rotor_simple</span><span class="params">(arr, logger, conf=None)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> isinstance(arr,dict):<span class="comment">#å¦‚æœæ•°æ®æ¥æºäºweb,  isinstance() å‡½æ•°æ¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªå·²çŸ¥çš„ç±»å‹ï¼Œç±»ä¼¼ type()ã€‚</span></span><br><span class="line">        arr = trans(arr)</span><br><span class="line">    <span class="comment">#print(arr[1])</span></span><br><span class="line">    rotation_frequency = round(float(arr[<span class="number">0</span>])/<span class="number">60</span>) <span class="comment"># æ—‹è½¬é¢‘ç‡</span></span><br><span class="line">    sample_frequency = int(arr[<span class="number">1</span>]) <span class="comment"># é‡‡æ ·é¢‘ç‡</span></span><br><span class="line">    useful_bandwidth = int(sample_frequency/<span class="number">2.56</span>) <span class="comment"># æœ‰æ•ˆå¸¦å®½</span></span><br><span class="line">    <span class="keyword">if</span> useful_bandwidth&lt;rotation_frequency*<span class="number">6</span>:</span><br><span class="line">        logger.warning(<span class="string">'æ•°æ®é‡‡æ ·é¢‘ç‡è¿‡ä½ï¼æ•°æ®ä½œåºŸ'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    sensor_data = transfer(arr[<span class="number">3</span>]) <span class="comment"># å°†é€—å·æ‹¼æ¥çš„ä¼ æ„Ÿå™¨æ•°æ®å˜æˆæ•°ç»„</span></span><br><span class="line">    data_length = len(sensor_data) <span class="comment"># é‡‡æ ·é•¿åº¦</span></span><br><span class="line">    sample_time = data_length/sample_frequency <span class="comment"># é‡‡æ ·æ—¶é—´</span></span><br><span class="line">    frequency_resolution = <span class="number">1</span>/sample_time <span class="comment"># é¢‘ç‡åˆ†è¾¨ç‡</span></span><br><span class="line">    <span class="keyword">if</span> (rotation_frequency&lt;<span class="number">10</span> <span class="keyword">and</span> frequency_resolution&gt;<span class="number">0.1</span>) <span class="keyword">or</span> sample_time&lt;<span class="number">1</span>:</span><br><span class="line">        logger.warning(<span class="string">'é‡‡æ ·æ—¶é—´è¿‡çŸ­ï¼æ•°æ®ä½œåºŸ'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    f0_candidates = [rotation_frequency<span class="number">-2</span>,rotation_frequency<span class="number">-1</span>,rotation_frequency,rotation_frequency+<span class="number">1</span>,rotation_frequency+<span class="number">2</span>] <span class="comment"># åŸºé¢‘</span></span><br><span class="line">    spectrum = abs(fft(sensor_data))[:useful_bandwidth]/len(sensor_data)  <span class="comment"># é¢‘è°±</span></span><br><span class="line">    f0 = f0_candidates[spectrum[f0_candidates].argmax()]<span class="comment"># ç¡®å®šåŸºé¢‘</span></span><br><span class="line">    segments = [[<span class="number">1</span>,int(<span class="number">0.40</span>*f0)],[int(<span class="number">0.40</span>*f0),int(<span class="number">0.50</span>*f0)],</span><br><span class="line">                [int(<span class="number">0.5</span>*f0)],[int(<span class="number">0.50</span>*f0)+<span class="number">1</span>,int(f0)],[f0],[int(<span class="number">2</span>*f0)],</span><br><span class="line">                [int(<span class="number">3</span>*f0),int(<span class="number">5</span>*f0)+<span class="number">1</span>],[int(<span class="number">6</span>*f0),useful_bandwidth]]</span><br><span class="line">    temp = []</span><br><span class="line">    <span class="keyword">for</span> seg <span class="keyword">in</span> segments:</span><br><span class="line">        <span class="keyword">if</span> len(seg)==<span class="number">2</span>:</span><br><span class="line">            max_value = max(spectrum[seg[<span class="number">0</span>]:seg[<span class="number">1</span>]])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            max_value = spectrum[seg[<span class="number">0</span>]]</span><br><span class="line">        temp.append(max_value)</span><br><span class="line">    <span class="keyword">return</span> temp</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rotor</span><span class="params">(data, useful_labels, conf, model_dir, logger)</span>:</span></span><br><span class="line">    djzs_field_name = conf[<span class="string">'Table'</span>][<span class="string">'djzs_field_name'</span>]</span><br><span class="line">    gzlx_field_name = conf[<span class="string">'Table'</span>][<span class="string">'gzlx_field_name'</span>]</span><br><span class="line">    cypl_field_name = conf[<span class="string">'Table'</span>][<span class="string">'cypl_field_name'</span>]</span><br><span class="line">    filtered_data = data.loc[:,[djzs_field_name,cypl_field_name,gzlx_field_name,<span class="string">'CGQ1'</span>]][data[gzlx_field_name].isin(useful_labels)]</span><br><span class="line">    </span><br><span class="line">    config_for_web = &#123;<span class="string">'mission'</span>:conf[<span class="string">'Mission'</span>][<span class="string">'table'</span>],</span><br><span class="line">                      <span class="string">'label'</span>:useful_labels,</span><br><span class="line">                     <span class="string">'function_for_web'</span>:conf[<span class="string">'Mission'</span>][<span class="string">'extract_feature_function_for_web'</span>]&#125;</span><br><span class="line">    <span class="keyword">with</span> open(model_dir+<span class="string">'\config_for_web.json'</span>,<span class="string">'w'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">        json.dump(config_for_web, file, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">    </span><br><span class="line">    feature_and_label = []</span><br><span class="line">    <span class="keyword">for</span> arr <span class="keyword">in</span> filtered_data.values:</span><br><span class="line">        temp = rotor_simple(arr, logger)</span><br><span class="line">        <span class="keyword">if</span> temp != <span class="literal">None</span>:<span class="comment"># æ•°æ®æœ‰æ•ˆ</span></span><br><span class="line">            temp.append(useful_labels.index(arr[<span class="number">2</span>]))</span><br><span class="line">            feature_and_label.append(temp)</span><br><span class="line">    feature_and_label = np.array(feature_and_label, dtype=np.float32)</span><br><span class="line">    </span><br><span class="line">    column = [<span class="string">'feature&#123;&#125;'</span>.format(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(feature_and_label.shape[<span class="number">1</span>]<span class="number">-1</span>)]+[<span class="string">'label'</span>]</span><br><span class="line">    df = pd.DataFrame(data=feature_and_label, columns=column)</span><br><span class="line">    df.to_csv(model_dir+<span class="string">'\\feature_and_label.csv'</span>, index=<span class="literal">False</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> feature_and_label</span><br></pre></td></tr></table></figure>

<h5 id="è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ "><a href="#è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ " class="headerlink" title="è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ "></a>è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ </h5><p>Python çš„ç¬¬ä¸‰æ–¹åŒ…TPOTå·²ç»å®ç°äº†åŸºäºé—ä¼ ç®—æ³•çš„è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ ï¼Œé€šè¿‡åœ¨Python ç¯å¢ƒä¸­å®‰è£…TPOTï¼Œå¹¶ä¸”è°ƒç”¨ç›¸å…³æ–¹æ³•å³å¯å®ç°è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ ã€‚éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">logger.info(<span class="string">'è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ åˆå§‹åŒ–...'</span>)</span><br><span class="line"><span class="keyword">from</span> tpot <span class="keyword">import</span> TPOTClassifier</span><br><span class="line"></span><br><span class="line">generations = int(conf[<span class="string">'Tpot'</span>][<span class="string">'generations'</span>])</span><br><span class="line">population_size = int(conf[<span class="string">'Tpot'</span>][<span class="string">'population_size'</span>])</span><br><span class="line">verbosity = int(conf[<span class="string">'Tpot'</span>][<span class="string">'verbosity'</span>])</span><br><span class="line"></span><br><span class="line">model = TPOTClassifier(generations=generations, population_size=population_size,  scoring=<span class="string">'f1_macro'</span>, cv=<span class="number">5</span>, n_jobs=<span class="number">1</span>, verbosity=verbosity)</span><br><span class="line">feature = feature_and_label[:,:<span class="number">-1</span>]</span><br><span class="line">label = feature_and_label[:,<span class="number">-1</span>]</span><br><span class="line">logger.info(<span class="string">'åˆå§‹åŒ–å®Œæ¯•ï¼Œå¼€å§‹å¯»æ‰¾æœ€ä¼˜æœºå™¨å­¦ä¹ æµç¨‹...'</span>)</span><br><span class="line">model.fit(feature, label)</span><br><span class="line">logger.info(<span class="string">'å¯»ä¼˜ç»“æŸï¼Œå¼€å§‹ä¿å­˜æœ€ä¼˜æœºå™¨å­¦ä¹ æµç¨‹...'</span>)</span><br><span class="line"><span class="keyword">from</span> sklearn.externals <span class="keyword">import</span> joblib</span><br><span class="line">joblib.dump(model.fitted_pipeline_, model_dir+<span class="string">'\pipeline.pkl'</span>)</span><br><span class="line">logger.info(<span class="string">'ä¿å­˜æˆåŠŸï¼Œè®­ç»ƒç»“æŸï¼'</span>)</span><br></pre></td></tr></table></figure>


<h5 id="æ•…éšœè¯Šæ–­ç³»ç»Ÿéƒ¨ç½²"><a href="#æ•…éšœè¯Šæ–­ç³»ç»Ÿéƒ¨ç½²" class="headerlink" title="æ•…éšœè¯Šæ–­ç³»ç»Ÿéƒ¨ç½²"></a>æ•…éšœè¯Šæ–­ç³»ç»Ÿéƒ¨ç½²</h5><p>åˆ©ç”¨Pythonè½»å‹Webæ¡†æ¶æ¥è¿›è¡Œéƒ¨ç½²æ„å»ºæ•…éšœè¯Šæ–­WebæœåŠ¡å™¨ã€‚åŠ è½½è¯Šæ–­ç®—æ³•å’Œå®ç°HTTPçš„POSTæ–¹æ³•ã€‚ã€</p>
<p>åŠ è½½è¯Šæ–­ç®—æ³•å¹¶åˆ›å»ºWebæœåŠ¡å™¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function_for_web = &#123;&#125;</span><br><span class="line">pipeline = &#123;&#125;</span><br><span class="line">label = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> each <span class="keyword">in</span> model_dirs:</span><br><span class="line">    logger.info(<span class="string">'æ­£åœ¨è¯»å–webé…ç½®æ–‡ä»¶...'</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> open(each+<span class="string">'\config_for_web.json'</span>,<span class="string">'r'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:</span><br><span class="line">            config_for_web = json.load(file)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        logger.error(<span class="string">'è¯»å–é…ç½®æ–‡ä»¶&#123;&#125;å¤±è´¥ï¼'</span>.format(each+<span class="string">'\config.ini'</span>), exc_info=<span class="literal">True</span>)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line">    logger.info(<span class="string">'webé…ç½®æ–‡ä»¶è¯»å–å®Œæˆ'</span>)</span><br><span class="line">    </span><br><span class="line">    mission = config_for_web[<span class="string">'mission'</span>]</span><br><span class="line">    function_for_web[mission] = config_for_web[<span class="string">'function_for_web'</span>]</span><br><span class="line">    pipeline[mission] = joblib.load(each+<span class="string">'\pipeline.pkl'</span>)</span><br><span class="line">    label[mission] = config_for_web[<span class="string">'label'</span>]</span><br><span class="line">    </span><br><span class="line">app.run(host=<span class="string">'0.0.0.0'</span>, port=<span class="number">5050</span>)</span><br></pre></td></tr></table></figure>

<p>POSTæ–¹æ³•å®ç°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route('/',methods=['POST'])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">diagnose</span><span class="params">()</span>:</span></span><br><span class="line">    results = &#123;&#125;</span><br><span class="line">    all_data = request.json</span><br><span class="line">    missions = all_data.keys()</span><br><span class="line"><span class="comment">#     logger.info(str(missions))</span></span><br><span class="line">    <span class="keyword">for</span> mission <span class="keyword">in</span> missions:</span><br><span class="line">        exec(<span class="string">'from extract_features import &#123;0&#125; as extract_function'</span>.format(function_for_web[mission]), globals())</span><br><span class="line">        data = all_data[mission]</span><br><span class="line">        feature = extract_function(data, logger, conf)<span class="comment"># feature is a list</span></span><br><span class="line">        proba = pipeline[mission].predict_proba(np.array(feature, np.float32).reshape(<span class="number">1</span>, <span class="number">-1</span>))[<span class="number">0</span>]</span><br><span class="line">        result = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> i, v <span class="keyword">in</span> enumerate(proba):</span><br><span class="line">            result[label[mission][i]] = <span class="string">'%.1f'</span>%round(float(v)*<span class="number">100</span>,<span class="number">1</span>)</span><br><span class="line">        results[mission] = result</span><br><span class="line"><span class="comment">#     print(results)</span></span><br><span class="line">    <span class="keyword">return</span> json.dumps(results, ensure_ascii=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure>

<h5 id="æ•…éšœè¯Šæ–­ç³»ç»Ÿæµ‹è¯•"><a href="#æ•…éšœè¯Šæ–­ç³»ç»Ÿæµ‹è¯•" class="headerlink" title="æ•…éšœè¯Šæ–­ç³»ç»Ÿæµ‹è¯•"></a>æ•…éšœè¯Šæ–­ç³»ç»Ÿæµ‹è¯•</h5><p>ä½¿ç”¨æ³µè½´æ•…éšœæ•°æ®ï¼ˆæ•°æ®ç±»åˆ«ä¸ºæ­£å¸¸ã€è½¬å­ä¸å¯¹ä¸­ã€è½¬å­ä¸å¹³è¡¡ã€æ¥è§¦æ‘©æ“¦æ ·æœ¬å„45 ä¸ªï¼Œæ¥æºå·¥å†µå•ä¸€ï¼‰æ¥ç®€å•æµ‹è¯•ä¸€ä¸‹æ‰€å®ç°æ•…éšœè¯Šæ–­ç³»ç»Ÿï¼Œæµ‹è¯•ç»“æœä¸‹å›¾æ‰€ç¤ºï¼Œæ¨ªåæ ‡ä»£è¡¨æœºå™¨å­¦ä¹ æµç¨‹ç»„æˆçš„ç§ç¾¤ä»£æ•°ï¼Œçºµåæ ‡ä»£è¡¨æ¯ä»£ç§ç¾¤ä¸­æœ€ä¼˜æœºå™¨å­¦ä¹ æµç¨‹çš„AUCè¯„åˆ†ã€‚</p>
<p><img src="/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/res.jpg" alt></p>

    </div>

    
    
    
      
  <div class="popular-posts-header">ç›¸å…³æ–‡ç« æ¨è</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\2020\04\01\è¯­éŸ³è¯†åˆ«\" rel="bookmark">è¯­éŸ³è¯†åˆ«</a></div>
    </li>
  </ul>

        <div class="reward-container">
  <div>å–œæ¬¢ä½ å°±æ‰“èµä¸€ä¸‹</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    æ‰“èµ
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.png" alt="Bryce å¾®ä¿¡æ”¯ä»˜">
        <p>å¾®ä¿¡æ”¯ä»˜</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>Bryce
  </li>
  <li class="post-copyright-link">
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
    <a href="https://bryceustc.github.io/2020/03/30/%E6%B3%B5%E7%AB%99%E6%9C%BA%E7%BB%84%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD/" title="æ³µç«™æœºç»„æ•…éšœè¯Šæ–­">https://bryceustc.github.io/2020/03/30/æ³µç«™æœºç»„æ•…éšœè¯Šæ–­/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener external nofollow noreferrer" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E9%A1%B9%E7%9B%AE/" rel="tag"># é¡¹ç›®</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/03/30/62_%E5%9C%86%E5%9C%88%E4%B8%AD%E6%9C%80%E5%90%8E%E5%89%A9%E4%B8%8B%E7%9A%84%E6%95%B0%E5%AD%97/" rel="prev" title="åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°å­—">
      <i class="fa fa-chevron-left"></i> åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°å­—
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/03/31/%E5%B8%B8%E8%A7%81%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" rel="next" title="å¸¸è§æ’åºç®—æ³•">
      å¸¸è§æ’åºç®—æ³• <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#æ•…éšœè¯Šæ–­ç³»ç»Ÿæ¦‚è¿°"><span class="nav-number">1.</span> <span class="nav-text">æ•…éšœè¯Šæ–­ç³»ç»Ÿæ¦‚è¿°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ•…éšœè¯Šæ–­ç³»ç»Ÿç ”ç©¶"><span class="nav-number">2.</span> <span class="nav-text">æ•…éšœè¯Šæ–­ç³»ç»Ÿç ”ç©¶</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#æ•…éšœæ•°æ®åº“è®¾è®¡è§„èŒƒ"><span class="nav-number">2.1.</span> <span class="nav-text">æ•…éšœæ•°æ®åº“è®¾è®¡è§„èŒƒ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ•…éšœæ ·æœ¬ä¸å¹³è¡¡å¤„ç†"><span class="nav-number">2.2.</span> <span class="nav-text">æ•…éšœæ ·æœ¬ä¸å¹³è¡¡å¤„ç†</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#æ ·æœ¬ä¸å¹³è¡¡ä¸‹çš„è®­ç»ƒæ–¹æ³•"><span class="nav-number">2.2.1.</span> <span class="nav-text">æ ·æœ¬ä¸å¹³è¡¡ä¸‹çš„è®­ç»ƒæ–¹æ³•</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#æ ·æœ¬ä¸å¹³è¡¡ä¸‹çš„è¯„ä¼°æ–¹æ³•"><span class="nav-number">2.2.2.</span> <span class="nav-text">æ ·æœ¬ä¸å¹³è¡¡ä¸‹çš„è¯„ä¼°æ–¹æ³•</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ•…éšœç‰¹å¾æå–"><span class="nav-number">2.3.</span> <span class="nav-text">æ•…éšœç‰¹å¾æå–</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ å·¥å…·TPOT"><span class="nav-number">2.4.</span> <span class="nav-text">è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ å·¥å…·TPOT</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#è¯Šæ–­ç®—æ³•çš„éƒ¨ç½²"><span class="nav-number">2.5.</span> <span class="nav-text">è¯Šæ–­ç®—æ³•çš„éƒ¨ç½²</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ•…éšœè¯Šæ–­ç³»ç»Ÿå…·ä½“å®ç°"><span class="nav-number">3.</span> <span class="nav-text">æ•…éšœè¯Šæ–­ç³»ç»Ÿå…·ä½“å®ç°</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ç³»ç»Ÿå¼€å‘ç¯å¢ƒ"><span class="nav-number">3.1.</span> <span class="nav-text">ç³»ç»Ÿå¼€å‘ç¯å¢ƒ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ç³»ç»ŸåŠŸèƒ½æ¨¡å—çš„å®ç°"><span class="nav-number">3.2.</span> <span class="nav-text">ç³»ç»ŸåŠŸèƒ½æ¨¡å—çš„å®ç°</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#æ—¥å¿—ç®¡ç†"><span class="nav-number">3.2.1.</span> <span class="nav-text">æ—¥å¿—ç®¡ç†</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#é…ç½®æ–‡ä»¶"><span class="nav-number">3.2.2.</span> <span class="nav-text">é…ç½®æ–‡ä»¶</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å»ºç«‹æœºç»„æ•…éšœæ•°æ®åº“"><span class="nav-number">3.3.</span> <span class="nav-text">å»ºç«‹æœºç»„æ•…éšœæ•°æ®åº“</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#å¹³è¡¡æ€§æ£€éªŒ"><span class="nav-number">3.3.1.</span> <span class="nav-text">å¹³è¡¡æ€§æ£€éªŒ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#æ•…éšœç‰¹å¾æå–-1"><span class="nav-number">3.3.2.</span> <span class="nav-text">æ•…éšœç‰¹å¾æå–</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ "><span class="nav-number">3.3.3.</span> <span class="nav-text">è‡ªåŠ¨åŒ–æœºå™¨å­¦ä¹ </span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#æ•…éšœè¯Šæ–­ç³»ç»Ÿéƒ¨ç½²"><span class="nav-number">3.3.4.</span> <span class="nav-text">æ•…éšœè¯Šæ–­ç³»ç»Ÿéƒ¨ç½²</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#æ•…éšœè¯Šæ–­ç³»ç»Ÿæµ‹è¯•"><span class="nav-number">3.3.5.</span> <span class="nav-text">æ•…éšœè¯Šæ–­ç³»ç»Ÿæµ‹è¯•</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Bryce"
      src="/images/touxiang.jfif">
  <p class="site-author-name" itemprop="name">Bryce</p>
  <div class="site-description" itemprop="description">å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">34</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/bryceustc" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;bryceustc" rel="noopener external nofollow noreferrer" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:bryceustc@mail.ustc.edu.cn" title="E-Mail â†’ mailto:bryceustc@mail.ustc.edu.cn" rel="noopener external nofollow noreferrer" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Bryce</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">ç«™ç‚¹æ€»å­—æ•°ï¼š</span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">114k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">1:44</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener external nofollow noreferrer" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener external nofollow noreferrer" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

</body>
</html>
